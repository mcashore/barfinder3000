<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript">

	  function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {
		var R = 6371; // Radius of the earth in km
		var dLat = deg2rad(lat2-lat1);  // deg2rad below
		var dLon = deg2rad(lon2-lon1); 
		var a = 
		Math.sin(dLat/2) * Math.sin(dLat/2) +
		Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
		Math.sin(dLon/2) * Math.sin(dLon/2); 
		var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
		var d = R * c; // Distance in km
		return d;
	  };

	  function deg2rad(deg) {
	  	return deg * (Math.PI/180)
	  };

      function getData(){
      	var twoDay = new Date();
        return $.getJSON(masseyURL,{day:twoDay.getDay()})["shit"];
      };

      function processData(stuff){
      	var b = [['Lat','Lon','Info']];
        for (bar in stuff){
        	var c = [];
        	var iinfo = "";
        	for(var i = 0; i< bar.length; i++){
				if (i == 0 || i == 1){
					c.push(bar[i]);
				}
				if (i == 3){
					iinfo += ("bar :" + bar[i] + " ");
				}
				if (i == 4){
					iinfo += ("drink : " + bar[i] + " ");
				}
				if (i == 5){
					iinfo += ("price : " + bar[i] + " ");
				}
				if (i == 6){
					iinfo += ("category : " + bar[i] + " ");
				}
        	}
        	c.push(iinfo);
			b.push(c);
        }
        return b;
      };

      function filter(locx,locy,spend,category,distance){
      	/*Turn street address into lat and long*/

      	/*filter list of shit*/
      	shit = [];
      	for (bar in stuff){
      		if 
      	}
      	console.log(shit);
      };

      google.load("visualization", "1", {packages:["map"]});
      google.setOnLoadCallback(drawMap);
      /*var stuff = getData();*/
      function drawMap() {
        var data = google.visualization.arrayToDataTable([
          ['Lat', 'Lon', 'Info'],
          [37.4238, -122.0853, 'Work'],
          /*[37.4289, -122.1697, 'University'],
          [37.6153, -122.3900, 'Airport'],
          [37.4422, -122.1731, 'Shopping']*/
        ]);

        var map = new google.visualization.Map($('#map_div')[0]);
        map.draw(data, {showTip: true});
      };

      $(function(){
	      $('form').submit(function(e){

			filter($('#locx').val(),$('#locy').val(),parseInt($('#spend').val()),parseInt($('#category').val()),parseInt($('#distance').val()));
	    	e.preventDefault();
		  });
		});
    </script>
  </head>

  <body>
  	<form>
		Street1: <input type="text" id="locx" name="locx">
		Street2: <input type="text" id="locy" name="locy">
		Spend: <input type="text" id="spend" name="spend">
		distance: <input type="text" id="distance" name="distance">
		Category: <input type="text" id="cat" name="cat">
		<input id="beer_submit" type="submit" value="submit" /> 
	</form>
    <div id="map_div" style="width: 75%; height: 75%"></div>
    <div id="list"></div>
  </body>
</html>